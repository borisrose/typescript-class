<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"><title>Configurer le compilateur</title><link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css"><link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css"><link rel="stylesheet" href="node_modules/reveal.js/dist/theme/black.css" id="theme"><!--This CSS is generated by the Asciidoctor reveal.js converter to further integrate AsciiDoc's existing semantic with reveal.js--><style type="text/css">.reveal div.right {
  float: right
}

/* source blocks */
.reveal .listingblock.stretch > .content {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre > code {
  height: 100%;
  max-height: 100%
}

/* auto-animate feature */
/* hide the scrollbar when auto-animating source blocks */
.reveal pre[data-auto-animate-target] {
  overflow: hidden;
}

.reveal pre[data-auto-animate-target] code {
  overflow: hidden;
}

/* add a min width to avoid horizontal shift on line numbers */
code.hljs .hljs-ln-line.hljs-ln-n {
  min-width: 1.25em;
}

/* tables */
table {
  border-collapse: collapse;
  border-spacing: 0
}

table {
  margin-bottom: 1.25em;
  border: solid 1px #dedede
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
  padding: .5em .625em .625em;
  font-size: inherit;
  text-align: left
}

table tr th, table tr td {
  padding: .5625em .625em;
  font-size: inherit
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
  display: table-cell;
  line-height: 1.6
}

td.tableblock > .content {
  margin-bottom: 1.25em
}

td.tableblock > .content > :last-child {
  margin-bottom: -1.25em
}

table.tableblock, th.tableblock, td.tableblock {
  border: 0 solid #dedede
}

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock {
  border-width: 0 1px 1px 0
}

table.grid-all > tfoot > tr > .tableblock {
  border-width: 1px 1px 0 0
}

table.grid-cols > * > tr > .tableblock {
  border-width: 0 1px 0 0
}

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock {
  border-width: 0 0 1px
}

table.grid-rows > tfoot > tr > .tableblock {
  border-width: 1px 0 0
}

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child {
  border-right-width: 0
}

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock {
  border-bottom-width: 0
}

table.frame-all {
  border-width: 1px
}

table.frame-sides {
  border-width: 0 1px
}

table.frame-topbot, table.frame-ends {
  border-width: 1px 0
}

.reveal table th.halign-left, .reveal table td.halign-left {
  text-align: left
}

.reveal table th.halign-right, .reveal table td.halign-right {
  text-align: right
}

.reveal table th.halign-center, .reveal table td.halign-center {
  text-align: center
}

.reveal table th.valign-top, .reveal table td.valign-top {
  vertical-align: top
}

.reveal table th.valign-bottom, .reveal table td.valign-bottom {
  vertical-align: bottom
}

.reveal table th.valign-middle, .reveal table td.valign-middle {
  vertical-align: middle
}

table thead th, table tfoot th {
  font-weight: bold
}

tbody tr th {
  display: table-cell;
  line-height: 1.6
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
  font-weight: bold
}

thead {
  display: table-header-group
}

.reveal table.grid-none th, .reveal table.grid-none td {
  border-bottom: 0 !important
}

/* kbd macro */
kbd {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  display: inline-block;
  color: rgba(0, 0, 0, .8);
  font-size: .65em;
  line-height: 1.45;
  background: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
  margin: 0 .15em;
  padding: .2em .5em;
  vertical-align: middle;
  position: relative;
  top: -.1em;
  white-space: nowrap
}

.keyseq kbd:first-child {
  margin-left: 0
}

.keyseq kbd:last-child {
  margin-right: 0
}

/* callouts */
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background: rgba(0, 0, 0, .8);
  -webkit-border-radius: 50%;
  border-radius: 50%;
  text-align: center;
  font-size: .75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold
}

.conum[data-value] * {
  color: #fff !important
}

.conum[data-value] + b {
  display: none
}

.conum[data-value]:after {
  content: attr(data-value)
}

pre .conum[data-value] {
  position: relative;
  top: -.125em
}

b.conum * {
  color: inherit !important
}

.conum:not([data-value]):empty {
  display: none
}

/* Callout list */
.hdlist > table, .colist > table {
  border: 0;
  background: none
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
  background: none
}

td.hdlist1, td.hdlist2 {
  vertical-align: top;
  padding: 0 .625em
}

td.hdlist1 {
  font-weight: bold;
  padding-bottom: 1.25em
}

/* Disabled from Asciidoctor CSS because it caused callout list to go under the
 * source listing when .stretch is applied (see #335)
 * .literalblock+.colist,.listingblock+.colist{margin-top:-.5em} */
.colist td:not([class]):first-child {
  padding: .4em .75em 0;
  line-height: 1;
  vertical-align: top
}

.colist td:not([class]):first-child img {
  max-width: none
}

.colist td:not([class]):last-child {
  padding: .25em 0
}

/* Override Asciidoctor CSS that causes issues with reveal.js features */
.reveal .hljs table {
  border: 0
}

/* Callout list rows would have a bottom border with some reveal.js themes (see #335) */
.reveal .colist > table th, .reveal .colist > table td {
  border-bottom: 0
}

/* Fixes line height with Highlight.js source listing when linenums enabled (see #331) */
.reveal .hljs table thead tr th, .reveal .hljs table tfoot tr th, .reveal .hljs table tbody tr td, .reveal .hljs table tr td, .reveal .hljs table tfoot tr td {
  line-height: inherit
}

/* Columns layout */
.columns .slide-content {
  display: flex;
}

.columns.wrap .slide-content {
  flex-wrap: wrap;
}

.columns.is-vcentered .slide-content {
  align-items: center;
}

.columns .slide-content > .column {
  display: block;
  flex-basis: 0;
  flex-grow: 1;
  flex-shrink: 1;
}

.columns .slide-content > .column > * {
  padding: .75rem;
}

/* See #353 */
.columns.wrap .slide-content > .column {
  flex-basis: auto;
}

.columns .slide-content > .column.is-full {
  flex: none;
  width: 100%;
}

.columns .slide-content > .column.is-four-fifths {
  flex: none;
  width: 80%;
}

.columns .slide-content > .column.is-three-quarters {
  flex: none;
  width: 75%;
}

.columns .slide-content > .column.is-two-thirds {
  flex: none;
  width: 66.6666%;
}

.columns .slide-content > .column.is-three-fifths {
  flex: none;
  width: 60%;
}

.columns .slide-content > .column.is-half {
  flex: none;
  width: 50%;
}

.columns .slide-content > .column.is-two-fifths {
  flex: none;
  width: 40%;
}

.columns .slide-content > .column.is-one-third {
  flex: none;
  width: 33.3333%;
}

.columns .slide-content > .column.is-one-quarter {
  flex: none;
  width: 25%;
}

.columns .slide-content > .column.is-one-fifth {
  flex: none;
  width: 20%;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.text-left {
  text-align: left !important
}

.text-right {
  text-align: right !important
}

.text-center {
  text-align: center !important
}

.text-justify {
  text-align: justify !important
}

.footnotes {
  border-top: 1px solid rgba(0, 0, 0, 0.2);
  padding: 0.5em 0 0 0;
  font-size: 0.65em;
  margin-top: 4em;
}

.byline {
  font-size:.8em
}
ul.byline {
  list-style-type: none;
}
ul.byline li + li {
  margin-top: 0.25em;
}
</style><link rel="stylesheet" href="styles.css"></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title"><h1>Configurer le compilateur</h1></section><section><section id="_tsc_le_compilateur" class="blue background"><h2>tsc : le compilateur</h2></section><section id="_le_vrai_type_checker" class="yellow background"><h2>le vrai type-checker</h2><div class="slide-content"><div class="paragraph"><p>On a parlé du principe de vérification de types, mais pas du vérificateur de types.</p></div>
<div class="paragraph"><p>Ce vérificateur n’est autre que le compilateur TypeScript, tsc.</p></div></div></section><section id="_installation" class="yellow background"><h2>installation</h2><div class="slide-content"><div class="paragraph"><p>Tout d’abord, il faut l’installer depuis npm.</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="language-bash" data-lang="bash">npm install -g typescript</code></pre></div></div>
<div class="paragraph"><p>Cette commande installe globalement le compilateur tsc.</p></div></div></section><section id="_alternatives" class="yellow background"><h2>alternatives</h2><div class="slide-content"><div class="paragraph"><p>Si vous préférez utiliser une version locale de TypeScript, vous pouvez utiliser <strong>npx</strong> ou tout autre outil similaire.</p></div></div></section><section id="_exemple" class="green background"><h2>Exemple</h2><div class="slide-content"><div class="paragraph"><p>Créons un dossier vide et un fichier hello.ts qui contient :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="language-typeScript" data-lang="typeScript">// Dire bonjour.
console.log("bonjour !");</code></pre></div></div></div></section><section id="_identité_avec_js" class="yellow background"><h2>identité avec JS</h2><div class="slide-content"><div class="paragraph"><p>Ce “hello world” est identique à un “bonjour !” en JavaScript.</p></div></div></section><section id="_commande_tsc" class="yellow background"><h2>commande tsc</h2><div class="slide-content"><div class="paragraph"><p>Maintenant, lançons la commande tsc qui a été installée avec le package typescript.</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="language-bash" data-lang="bash">tsc hello.ts</code></pre></div></div></div></section><section id="_observation" class="yellow background"><h2>Observation</h2><div class="slide-content"><div class="paragraph"><p>un nouveau fichier a été créé : dans le même dossier, il y a un hello.js à côté de hello.ts.</p></div>
<div class="paragraph"><p>C’est le résultat de la compilation de hello.ts en un fichier JavaScript standard.</p></div></div></section><section id="_quest_ce_qui_se_trouve_dedans" class="yellow background"><h2>Qu&#8217;est-ce qui se trouve dedans ?</h2><div class="slide-content"><div class="paragraph"><p>Observons le contenu du fichier émis par TypeScript :</p></div>
<div class="paragraph"><p>console.log("Hello world!");</p></div>
<div class="paragraph"><p>Ici, TypeScript n’a pas eu grand-chose à transformer, donc le code final est identique au code de départ.</p></div></div></section><section id="_le_compilateur" class="yellow background"><h2>Le compilateur</h2><div class="slide-content"><div class="paragraph"><p>Le compilateur essaie toujours d’émettre du code qui ressemble à ce qu’écrirait une vraie personne.</p></div>
<div class="paragraph"><p>TypeScript :</p></div>
<div class="ulist"><ul><li class="fragment"><p>conserve l’indentation,</p></li><li class="fragment"><p>fait attention quand le code s’étend sur beaucoup de lignes,</p></li><li class="fragment"><p>essaie de conserver les commentaires.</p></li></ul></div></div></section><section id="_repérage_des_erreurs_dans_du_js_valide" class="yellow background"><h2>Repérage des erreurs dans du JS valide</h2><div class="slide-content"><div class="paragraph"><p>Essayons d’introduire une erreur de vérification en modifiant hello.ts :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">// Fonction de salutation générique et de haut niveau :
function greet(person, date) {
  console.log(`Bonjour ${person}, nous sommes le ${date} !`);
}

greet("Brendan");</code></pre></div></div></div></section><section id="_constat" class="yellow background"><h2>Constat</h2><div class="slide-content"><div class="paragraph"><p>Si on lance tsc hello.ts à nouveau, on remarque qu’on a bel et bien une erreur.</p></div>
<div class="paragraph"><p>Expected 2 arguments, but got 1.</p></div>
<div class="paragraph"><p>TypeScript nous informe qu’on a oublié de passer un argument à la fonction greet, à raison.</p></div></div></section><section id="_conclusion" class="yellow background"><h2>Conclusion</h2><div class="slide-content"><div class="paragraph"><p>Nous avons écrit ce qui peut être vu comme du JavaScript valide, et la vérification de types a quand même pu repérer des erreurs.</p></div></div></section></section>
<section><section id="_la_transformation_en_js_du_ts" class="blue background"><h2>La transformation en JS du TS</h2></section><section id="_départ_des_backticks_le_nivellement_vers_le_bas" class="yellow background"><h2>Départ des backticks : le nivellement vers le bas</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">`Hello ${person}, today is ${date.toDateString()}!`;</code></pre></div></div></div></section><section id="_les_templates_strings" class="yellow background"><h2>Les Templates strings</h2><div class="slide-content"><div class="paragraph"><p>Les Template strings sont une fonctionnalité d’ECMAScript appelée ECMAScript 2015 (mais aussi ECMAScript 6, ES2015, ES6, etc. - c’est compliqué).</p></div></div></section><section id="_ce_que_ts_peut_faire" class="yellow background"><h2>Ce que TS peut faire</h2><div class="slide-content"><div class="paragraph"><p>TypeScript peut réécrire le code de versions récentes d’ECMAScript vers certaines plus anciennes, tel que ECMAScript 3 ou ECMAScript 5 (ES3 et ES5).</p></div>
<div class="paragraph yellow background"><p>Le fait de passer d’une version plus récente ou plus neuve d’ECMAScript vers une autre plus basse s’appelle le nivellement vers le bas.</p></div>
<div class="paragraph"><p>Par défaut, TypeScript vise ES3, une version extrêmement vieille d’ECMAScript.</p></div></div></section><section id="_syntaxe_es3" class="green background"><h2>Syntaxe ES3</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">"Hello " + person + ", today is " + date.toDateString() + "!";</code></pre></div></div></div></section><section id="_choix_dune_version_plus_récente_que_es3" class="yellow background"><h2>Choix d&#8217;une version plus récente que ES3</h2><div class="slide-content"><div class="paragraph"><p>Nous aurions pu choisir une version un peu plus récente avec l’option target.</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="language-bash" data-lang="bash">tsc --target es2015 hello.ts</code></pre></div></div></div></section><section id="_target_version_name" class="yellow background"><h2>--target version_name</h2><div class="slide-content"><div class="paragraph"><p>Compiler avec --target es2015 compile TypeScript en visant ECMAScript 2015, donc tout environnement supportant ES2015 peut lancer ce code.</p></div></div></section><section id="_résultat"><h2>Résultat</h2><div class="slide-content"><div class="paragraph"><p>Lancer tsc --target es2015 hello.ts nous mène au résultat suivant :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">function greet(person, date) {
  console.log(`Hello ${person}, today is ${date.toDateString()}!`);
}
greet("Maddison", new Date());</code></pre></div></div></div></section><section id="_en_conclusion" class="yellow background"><h2>En conclusion</h2><div class="slide-content"><div class="paragraph"><p>La cible par défaut est ES3, mais tous les navigateurs modernes supportent ES2015.</p></div>
<div class="paragraph"><p>Donc la plupart des développeurs peuvent viser ES2015 ou plus haut, sauf si supporter d’anciens navigateurs est une contrainte.</p></div></div></section></section>
<section id="_effacement_des_annotations_de_types" class="blue background"><h2>Effacement des annotations de types</h2><div class="slide-content"><div class="paragraph"><p>Les annotations de types ne font pas partie de la spécification JavaScript (ou ECMAScript si on veut chercher la petite bête), donc TypeScript ne peut pas s’exécuter dans un navigateur sans modification préalable.</p></div></div></section>
<section id="_lintérêt_du_compilateur_ts" class="blue background"><h2>L&#8217;intérêt du compilateur TS</h2><div class="slide-content"><div class="paragraph"><p>C’est tout l’intérêt d’un compilateur TypeScript - il permet de transformer le code et lui permettre de se lancer.
La plupart du code propre à TypeScript est effacée, y compris nos annotations de types.</p></div></div></section>
<section id="_le_fichier_tsconfig_json"><h2>le fichier "tsconfig.json"</h2></section>
<section><section id="_les_options_du_compilateur" class="background blue"><h2>Les options du compilateur</h2><div class="slide-content"><div class="paragraph"><p>TypeScript est utilisé pour diverses raisons.</p></div></div></section><section id="_option_1_par_défaut_laxiste" class="yellow background"><h2>Option 1 / par défaut : laxiste</h2></section><section id="_t_checking_à_votre_discrétion" class="green background"><h2>T-checking à votre discrétion</h2><div class="slide-content"><div class="paragraph"><p>Certains développeurs veulent une expérience laxiste et volontaire.</p></div>
<div class="paragraph"><p>TypeScript peut valider certaines parties du programme uniquement, tout en laissant ses capacités disponibles.</p></div>
<div class="paragraph"><p>C’est l’expérience par défaut avec TypeScript, où le typage est optionnel.</p></div>
<div class="paragraph"><p>L’inférence déduit des types vagues, et aucune valeur null/undefined n’est vérifiée.</p></div></div></section><section id="_intérêt" class="green background"><h2>Intérêt</h2><div class="slide-content"><div class="paragraph"><p>Tout comme tsc émet des fichiers même avec des erreurs, ces comportements par défaut sont en place pour qu’ils ne vous entravent pas.</p></div>
<div class="paragraph"><p>Ce serait une première étape désirable si vous migrez du code JavaScript.</p></div></div></section><section id="_option_2_strict" class="yellow background"><h2>Option 2 : strict</h2></section><section id="_plusieurs_options" class="green background"><h2>Plusieurs options</h2><div class="slide-content"><div class="paragraph"><p>D’autres utilisateurs souhaitent que TypeScript valide et soit strict le plus possible, d’où plusieurs options disponibles à cet effet.</p></div></div></section><section id="_niveaux_de_rigueur" class="green background"><h2>Niveaux de rigueur</h2><div class="slide-content"><div class="paragraph"><p>Ces paramètres permettent d’avoir des “niveaux” de rigueur (allant du laxiste au plus strict possible) plutôt que d’avoir deux options binaires (faire de la vérification de code ou pas du tout).</p></div>
<div class="paragraph"><p>Plus vous montez en niveaux de rigueur, plus TypeScript vous assistera avec la validation et la vérification.</p></div>
<div class="paragraph"><p>Cela peut nécessiter du travail supplémentaire, mais il se rentabilise sur le long terme.</p></div></div></section><section id="_conseil" class="yellow background"><h2>Conseil</h2><div class="slide-content"><div class="paragraph"><p>Si possible, une nouvelle base de code doit toujours avoir les vérifications strictes activées.</p></div></div></section></section>
<section><section id="_les_options_de_rigueur_de_ts" class="blue background"><h2>Les options de rigueur de TS</h2><div class="slide-content"><div class="paragraph"><p>TypeScript a plusieurs options de rigueur qui peuvent être activées ou pas, et tous nos exemples les suivront, sauf si le contraire est mentionné.</p></div></div></section><section id="_commande" class="yellow background"><h2>commande</h2><div class="slide-content"><div class="paragraph"><p>L’option strict dans la ligne de commande, ou "strict": true dans le fichier tsconfig.json les active toutes ensemble, mais il est possible de les désactiver individuellement.</p></div>
<div class="paragraph"><p>Les deux options les plus importantes sont:</p></div>
<div class="ulist"><ul><li class="fragment"><p>noImplicitAny</p></li><li class="fragment"><p>strictNullChecks.</p></li></ul></div></div></section><section id="_noimplicitany" class="yellow background"><h2>noImplicitAny</h2><div class="slide-content"><div class="paragraph"><p>À certains endroits, TypeScript n’essaie pas d’inférer de types et va rendre le type le plus laxiste : any.</p></div>
<div class="paragraph"><p>Ce n’est pas forcément un problème - de toute façon, le type any est ce que JavaScript va vous donner.</p></div></div></section><section id="_any_où_la_perte_de_lintérêt_de_ts" class="green background"><h2>any où la perte de l&#8217;intérêt de TS</h2><div class="slide-content"><div class="paragraph"><p>Cependant, utiliser any ne donne plus aucun intérêt d’utiliser TypeScript.</p></div></div></section><section id="_intérêt_du_typage" class="green background"><h2>Intérêt du typage</h2><div class="slide-content"><div class="paragraph"><p>Plus votre programme est couvert par du typage, plus vous serez épaulé en termes de validation et d’outillage, et moins vous aurez de bugs.</p></div>
<h3>Conséquence de l&#8217;activation de l&#8217;option noImplicitAny</h3><div class="paragraph"><p>Activer l’option noImplicitAny va remonter une erreur pour toute variable avec un type qui a été inféré en any.</p></div></div></section><section id="_strictnullchecks" class="yellow background"><h2>strictNullChecks</h2><div class="slide-content"><div class="paragraph"><p>Par défaut, les valeurs comme null et undefined sont assignables à tout autre type. Cela peut s’avérer pratique, mais oublier de gérer null et undefined est la cause d’innombrables bugs.</p></div>
<div class="paragraph"><p>L’option strictNullChecks rend la gestion de null et undefined plus explicite.</p></div></div></section></section>
<section id="_créer_un_build" class="blue background"><h2>Créer un "build"</h2><div class="slide-content"><div class="paragraph"><p>Exemple en live coding</p></div></div></section>
<section id="_les_stratégies_de_projets_à_configuration_multiples" class="yellow background"><h2>Les stratégies de projets à configuration multiples</h2><div class="slide-content"><div class="paragraph"><p>Ci-dessus</p></div></div></section>
<section id="_linclusion_et_lexclusion_de_ressources" class="blue background"><h2>L&#8217;inclusion et l&#8217;exclusion de ressources</h2><div class="slide-content"><div class="paragraph"><p>Exemple en live coding</p></div></div></section>
<section id="_la_création_dun_workflow_personnalisé" class="blue background"><h2>La création d&#8217;un workflow personnalisé</h2><div class="slide-content"><div class="paragraph"><p>Ci-dessus</p></div></div></section></div></div><script src="node_modules/reveal.js/dist/reveal.js"></script><script>Array.prototype.slice.call(document.querySelectorAll('.slides section')).forEach(function(slide) {
  if (slide.getAttribute('data-background-color')) return;
  // user needs to explicitly say he wants CSS color to override otherwise we might break custom css or theme (#226)
  if (!(slide.classList.contains('canvas') || slide.classList.contains('background'))) return;
  var bgColor = getComputedStyle(slide).backgroundColor;
  if (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
    slide.setAttribute('data-background-color', bgColor);
    slide.style.backgroundColor = 'transparent';
  }
});

// More info about config & dependencies:
// - https://github.com/hakimel/reveal.js#configuration
// - https://github.com/hakimel/reveal.js#dependencies
Reveal.initialize({
  // Display presentation control arrows
  controls: true,
  // Help the user learn the controls by providing hints, for example by
  // bouncing the down arrow when they first encounter a vertical slide
  controlsTutorial: true,
  // Determines where controls appear, "edges" or "bottom-right"
  controlsLayout: 'bottom-right',
  // Visibility rule for backwards navigation arrows; "faded", "hidden"
  // or "visible"
  controlsBackArrows: 'faded',
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: false,
  // Control which views the slide number displays on
  showSlideNumber: 'all',
  // Add the current slide number to the URL hash so that reloading the
  // page/copying the URL will return you to the same slide
  hash: false,
  // Push each slide change to the browser history. Implies `hash: true`
  history: false,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Disables the default reveal.js slide layout so that you can use custom CSS layout
  disableLayout: false,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // See https://github.com/hakimel/reveal.js/#navigation-mode
  navigationMode: 'default',
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags whether to include the current fragment in the URL,
  // so that reloading brings you to the same fragment position
  fragmentInURL: false,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Global override for preloading lazy-loaded iframes
  // - null: Iframes with data-src AND data-preload will be loaded when within
  //   the viewDistance, iframes with only data-src will be loaded when visible
  // - true: All iframes with data-src will be loaded when within the viewDistance
  // - false: All iframes with data-src will be loaded only when visible
  preloadIframes: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Use this method for navigation when auto-sliding
  autoSlideMethod: Reveal.navigateNext,
  // Specify the average time in seconds that you think you will spend
  // presenting each slide. This is used to show a pacing timer in the
  // speaker view
  defaultTiming: 120,
  // Specify the total time in seconds that is available to
  // present.  If this is set to a nonzero value, the pacing
  // timer will work out the time available for each slide,
  // instead of using the defaultTiming value
  totalTime: 0,
  // Specify the minimum amount of time you want to allot to
  // each slide, if using the totalTime calculation method.  If
  // the automated time allocation causes slide pacing to fall
  // below this threshold, then you will see an alert in the
  // speaker notes window
  minimumTimePerSlide: 0,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hide cursor if inactive
  hideInactiveCursor: true,
  // Time before the cursor is hidden (in ms)
  hideCursorTime: 5000,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  // Add `data-preview-link` and `data-preview-link="false"` to customise each link
  // individually
  previewLinks: false,
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: 'slide',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Number of slides away from the current that are visible on mobile
  // devices. It is advisable to set this to a lower number than
  // viewDistance in order to save resources.
  mobileViewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Number of pixels to move the parallax background per slide
  // - Calculated automatically unless specified
  // - Set to 0 to disable movement along an axis
  parallaxBackgroundHorizontal: null,
  parallaxBackgroundVertical: null,
  // The display mode that will be used to show slides
  display: 'block',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // PDF Export Options
  // Put each fragment on a separate page
  pdfSeparateFragments: true,
  // For slides that do not fit on a page, max number of pages
  pdfMaxPagesPerSlide: 1,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'node_modules/reveal.js/plugin/zoom/zoom.js', async: true, callback: function () { Reveal.registerPlugin(RevealZoom) } },
      { src: 'node_modules/reveal.js/plugin/notes/notes.js', async: true, callback: function () { Reveal.registerPlugin(RevealNotes) } }
  ],
});</script><script>var dom = {};
dom.slides = document.querySelector('.reveal .slides');

function getRemainingHeight(element, slideElement, height) {
  height = height || 0;
  if (element) {
    var newHeight, oldHeight = element.style.height;
    // Change the .stretch element height to 0 in order find the height of all
    // the other elements
    element.style.height = '0px';
    // In Overview mode, the parent (.slide) height is set of 700px.
    // Restore it temporarily to its natural height.
    slideElement.style.height = 'auto';
    newHeight = height - slideElement.offsetHeight;
    // Restore the old height, just in case
    element.style.height = oldHeight + 'px';
    // Clear the parent (.slide) height. .removeProperty works in IE9+
    slideElement.style.removeProperty('height');
    return newHeight;
  }
  return height;
}

function layoutSlideContents(width, height) {
  // Handle sizing of elements with the 'stretch' class
  toArray(dom.slides.querySelectorAll('section .stretch')).forEach(function (element) {
    // Determine how much vertical space we can use
    var limit = 5; // hard limit
    var parent = element.parentNode;
    while (parent.nodeName !== 'SECTION' && limit > 0) {
      parent = parent.parentNode;
      limit--;
    }
    if (limit === 0) {
      // unable to find parent, aborting!
      return;
    }
    var remainingHeight = getRemainingHeight(element, parent, height);
    // Consider the aspect ratio of media elements
    if (/(img|video)/gi.test(element.nodeName)) {
      var nw = element.naturalWidth || element.videoWidth, nh = element.naturalHeight || element.videoHeight;
      var es = Math.min(width / nw, remainingHeight / nh);
      element.style.width = (nw * es) + 'px';
      element.style.height = (nh * es) + 'px';
    } else {
      element.style.width = width + 'px';
      element.style.height = remainingHeight + 'px';
    }
  });
}

function toArray(o) {
  return Array.prototype.slice.call(o);
}

Reveal.addEventListener('slidechanged', function () {
  layoutSlideContents(960, 700)
});
Reveal.addEventListener('ready', function () {
  layoutSlideContents(960, 700)
});
Reveal.addEventListener('resize', function () {
  layoutSlideContents(960, 700)
});</script></body></html>